<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Essen bestellen</title>
  <style>
    body {
      background-color: #1a1a2e;
      color: #fff;
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    h2 {
      margin-top: 30px;
      border-bottom: 2px solid #444;
    }
    .item {
      display: inline-block;
      background: #2c2c3e;
      padding: 10px;
      margin: 5px;
      border: 1px solid #555;
      border-radius: 6px;
      width: 200px;
      vertical-align: top;
    }
    .item input {
      width: 100%;
      margin-top: 5px;
      background: #111;
      color: white;
      text-align: center;
    }
    .locked {
      color: #888;
      font-style: italic;
    }
    #gesamt {
      margin-top: 30px;
      font-size: 1.2em;
    }
    button {
      background: #4b4be7;
      color: white;
      padding: 10px 15px;
      border: none;
      margin-top: 20px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>Essen bestellen</h1>

  <div id="menu"></div>
  <div id="gesamt">Gesamt: 0â€¯â‚¬</div>
  <button onclick="sendOrder()">Bestellung absenden</button>

  <script>
    const currentMonth = new Date().getMonth() + 1;

    const menuData = {
      "ðŸ” Klassiker vom Grill": [
        ["Cheeseburger Supreme", 650],
        ["BBQ-Bacon Burger", 700],
        ["Veggie Crunch Burger ðŸ¥¬", 590],
        ["Doppel-Patty Inferno ðŸ”¥", 820]
      ],
      "ðŸŒ­ Snacks & Fingerfood": [
        ["XXL Currywurst", 450],
        ["Hotdog Deluxe", 490],
        ["Chicken Nuggets (6 StÃ¼ck)", 350],
        ["Chicken Nuggets (9 StÃ¼ck)", 450],
        ["Chicken Nuggets (12 StÃ¼ck)", 550],
        ["Mozzarella-Sticks ðŸ§€", 390]
      ],
      "ðŸŸ Beilagen & Extras": [
        ["Pommes Spezial", 300],
        ["Chili Cheese Fries ðŸŒ¶ï¸ðŸ§€", 390],
        ["Wedges mit Sour Cream", 350],
        ["Onion Rings ðŸ§…", 320]
      ],
      "ðŸ¥¤ Drinks & Erfrischungen": [
        ["Cola / Fanta / Sprite", 180],
        ["Hausgemachter Eistee ðŸ‹", 220],
        ["Energy Fusion ðŸ”‹", 280],
        ["Wassermelonen-Slushie ðŸ‰", 250]
      ],
      "ðŸŽ‰ Monatsspecials": [
        ["Mexican Meltdown â€“ Burrito Burger ðŸŒ®", 790, 6],
        ["Summer Chicken Wrap mit Mangosauce", 670, 7],
        ["Der Scharfe Maxx ðŸŒ¶ï¸ðŸŒ¶ï¸ðŸŒ¶ï¸", 750, 8]
      ]
    };

    const menuDiv = document.getElementById("menu");

    Object.entries(menuData).forEach(([kategorie, items]) => {
      const title = document.createElement("h2");
      title.textContent = kategorie;
      menuDiv.appendChild(title);

      items.forEach(([name, preis, monat]) => {
        const div = document.createElement("div");
        div.className = "item";

        if (kategorie === "ðŸŽ‰ Monatsspecials" && monat !== currentMonth) {
          div.innerHTML = `<div class="locked">ðŸ”’ ${name}<br><small>Nur im ${monatName(monat)}</small></div>`;
        } else {
          const id = name.replace(/\s+/g, "_");
          div.innerHTML = `
            <label>${name} (${(preis / 100).toFixed(2).replace('.', ',')}â€¯â‚¬)</label>
            <input type="number" min="0" value="0" data-preis="${preis}" onchange="updateTotal()" />
          `;
        }

        menuDiv.appendChild(div);
      });
    });

    function monatName(m) {
      return ["Januar", "Februar", "MÃ¤rz", "April", "Mai", "Juni", "Juli", "August", "September", "Oktober", "November", "Dezember"][m - 1];
    }

    function updateTotal() {
      let summe = 0;
      document.querySelectorAll('input[type="number"]').forEach(input => {
        const menge = parseInt(input.value) || 0;
        const preis = parseInt(input.dataset.preis);
        summe += menge * preis;
      });
      document.getElementById("gesamt").innerText = `Gesamt: ${(summe / 100).toFixed(2).replace('.', ',')}â€¯â‚¬`;
    }

    function sendOrder() {
      const auswahl = [];
      let gesamt = 0;

      document.querySelectorAll('input[type="number"]').forEach(input => {
        const menge = parseInt(input.value) || 0;
        const preis = parseInt(input.dataset.preis);
        if (menge > 0) {
          const label = input.previousElementSibling.innerText;
          auswahl.push(`${label} Ã—${menge}`);
          gesamt += menge * preis;
        }
      });

      if (auswahl.length === 0) {
        alert("Keine Auswahl getroffen!");
        return;
      }

      const nachricht = `ðŸ§¾ Neue Bestellung:\n\n${auswahl.join("\n")}\n\nGesamt: ${(gesamt / 100).toFixed(2).replace('.', ',')}â€¯â‚¬`;

      const webhook = "https://discord.com/api/webhooks/1395065575796904037/K0-7PL3Dj1l2NL7ggWWIzqB5_qS2LWbxgrEl9G48XmRIEJH2nyKhvS5iLosifBh_fP4-"; // <- Ersetzen!

      fetch(webhook, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ content: nachricht })
      }).then(() => {
        alert("Bestellung erfolgreich gesendet!");
        location.reload();
      }).catch(() => alert("Fehler beim Senden!"));
    }
  </script>
</body>
</html>
