<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>üçî Essen bestellen</title>
  <style>
    body {
      background-color: #0e0f1a;
      color: #fff;
      font-family: Arial, sans-serif;
      padding: 20px;
    }

    h1 {
      font-size: 24px;
      margin-bottom: 10px;
    }

    input[type="text"], input[type="number"] {
      padding: 8px;
      border-radius: 5px;
      border: none;
      background: #222;
      color: #fff;
      margin-right: 10px;
    }

    .controls {
      margin-bottom: 20px;
    }

    .gericht {
      border: 1px solid #444;
      border-radius: 8px;
      padding: 10px;
      margin: 8px;
      background-color: #1a1b2e;
      width: 240px;
      display: inline-block;
      vertical-align: top;
    }

    .gericht input[type="number"] {
      width: 40px;
    }

    section {
      margin-bottom: 30px;
    }

    button {
      background-color: #5865F2;
      color: white;
      padding: 8px 12px;
      border: none;
      border-radius: 6px;
      margin: 5px;
      cursor: pointer;
    }

    button:hover {
      background-color: #4752c4;
    }

    .disabled {
      opacity: 0.4;
    }

    .kategorie-title {
      font-size: 20px;
      margin-top: 25px;
    }
  </style>
</head>
<body>

<h1>üçΩÔ∏è Essen bestellen</h1>

<div class="controls">
  <label>üìç Wohin soll geliefert werden?
    <input type="text" id="zielort" placeholder="z.‚ÄØB. Raum 3B, EG">
  </label>

  <label>Menge:
    <input type="number" id="mengeDefault" value="1" min="1" max="99">
  </label>

  <button onclick="selectAll()">Alles ausw√§hlen</button>
  <button onclick="filter('Getr√§nke')">Nur Getr√§nke</button>
  <button onclick="filter('Hauptgerichte')">Nur Hauptgerichte</button>
  <button onclick="filter('Vorspeisen')">Nur Vorspeisen</button>
  <button onclick="filter('S√º√üspeisen')">Nur S√º√üspeisen</button>
  <button onclick="resetFilter()">Zur√ºcksetzen</button>
</div>

<div id="gerichte-container"></div>

<h2 id="gesamt">Gesamt: 0 ‚Ç¨</h2>

<button onclick="bestellungAbsenden()">üì¶ Bestellung absenden</button>
<button onclick="location.reload()">Zur√ºck</button>

<script>
const aktuellerMonat = new Date().toLocaleString('de-DE', { month: 'long' });

const gerichte = {
  "Vorspeisen": [
    ["Bruschetta mit Tomaten & Basilikum", 7.5],
    ["Salat aller Art", 4.0],
    ["Suppen aller Art", 5.0]
  ],
  "Hauptgerichte": [
    ["D√∂ner", 8.0],
    ["Spaghetti Bolognese", 8.5],
    ["Bratwurst im Br√∂tchen", 6.0],
    ["Currywurst mit Pommes", 7.0],
    ["Kleine Pommes", 4.0],
    ["Gro√üe Pommes", 5.0],
    ["Milchreis", 6.5],
    ["K√∂nigsberger Klopse", 7.0],
    ["Rindfleisch Berliner Art", 24.0],
    ["Schnitzel", 17.0],
    ["Buletten mit Kartoffelsalat", 9.0],
    ["Pizza aller Art", 12.0],
    ["Cheeseburger", 7.0],
    ["Hamburger", 6.0]
  ],
  "Getr√§nke": [
    ["Espresso", 1.4],
    ["Cappuccino", 2.8],
    ["Schwarzer Tee", 2.0],
    ["Gr√ºner Tee", 2.5],
    ["Kr√§uter- und Fr√ºchtetee", 2.5],
    ["Hei√üe Schokolade", 3.0],
    ["Fanta", 1.8],
    ["Cola", 1.8],
    ["S√§fte", 1.8],
    ["Stilles Wasser", 1.8],
    ["Sprudel Wasser", 1.8],
    ["Ayran", 1.5]
  ],
  "S√º√üspeisen": [
    ["Kuchen aller Art", 2.5],
    ["Berliner / Pfannkuchen", 2.0],
    ["Waffel", 2.5],
    ["Quarkb√§llchen (5 St√ºck)", 2.0],
    ["Rote Gr√ºtze", 4.0],
    ["Eiskugel (versch. Sorten)", 2.0],
    ["Apfelstrudel", 6.0],
    ["Hamburger Franzbr√∂tchen", 2.0]
  ],
  "Monatsspecials": [
    ["Juni: Mexican Meltdown üåÆ", 7.9, "Juni"],
    ["Juli: Summer Chicken Wrap mit Mangosauce", 6.7, "Juli"],
    ["August: Der Scharfe Maxx üå∂Ô∏è", 7.5, "August"]
  ]
};

function renderGerichte() {
  const container = document.getElementById("gerichte-container");
  container.innerHTML = "";

  for (const [kategorie, items] of Object.entries(gerichte)) {
    const section = document.createElement("section");
    section.dataset.kategorie = kategorie;
    section.innerHTML = `<div class="kategorie-title">${kategorie}</div>`;

    items.forEach(([name, preis, monat]) => {
      const istAktiv = !monat || monat === aktuellerMonat;
      const card = document.createElement("div");
      card.className = "gericht";
      if (!istAktiv) card.classList.add("disabled");
      card.dataset.kategorie = kategorie;

      card.innerHTML = `
        <div><strong>${name}</strong> (${preis.toFixed(2).replace('.', ',')}‚ÄØ‚Ç¨)</div>
        <input type="number" min="0" value="0" ${!istAktiv ? "disabled" : ""} data-preis="${preis}" oninput="updateTotal()">
      `;
      section.appendChild(card);
    });

    container.appendChild(section);
  }
}

function updateTotal() {
  let summe = 0;
  document.querySelectorAll('.gericht input[type=number]').forEach(input => {
    const menge = parseInt(input.value);
    const preis = parseFloat(input.dataset.preis);
    if (menge > 0) summe += menge * preis;
  });
  document.getElementById("gesamt").textContent = `Gesamt: ${summe.toFixed(2).replace('.', ',')} ‚Ç¨`;
}

function selectAll() {
  const menge = parseInt(document.getElementById("mengeDefault").value);
  document.querySelectorAll('.gericht input[type=number]:not(:disabled)').forEach(input => input.value = menge);
  updateTotal();
}

function filter(kategorie) {
  document.querySelectorAll("section").forEach(section => {
    section.style.display = section.dataset.kategorie === kategorie ? "block" : "none";
  });
}

function resetFilter() {
  document.querySelectorAll("section").forEach(section => section.style.display = "block");
}

function bestellungAbsenden() {
  const zielort = document.getElementById("zielort").value.trim();
  if (!zielort) return alert("Bitte gib einen Zielort an.");

  const items = [];
  let summe = 0;

  document.querySelectorAll(".gericht").forEach(card => {
    const input = card.querySelector("input");
    const menge = parseInt(input.value);
    const name = card.querySelector("strong").textContent;
    const preis = parseFloat(input.dataset.preis);
    if (menge > 0) {
      summe += menge * preis;
      items.push(`${menge}√ó ${name} (${preis.toFixed(2).replace('.', ',')}‚ÄØ‚Ç¨)`);
    }
  });

  if (items.length === 0) return alert("Bitte w√§hle etwas aus.");

  const embed = {
    embeds: [{
      title: "üì¶ Neue Bestellung",
      color: 0x5865F2,
      fields: [
        { name: "Ort", value: zielort, inline: true },
        { name: "Inhalt", value: items.join("\n") },
        { name: "Gesamt", value: `${summe.toFixed(2).replace('.', ',')} ‚Ç¨`, inline: true },
      ],
      timestamp: new Date().toISOString()
    }]
  };

  fetch("https://discord.com/api/webhooks/1395065575796904037/K0-7PL3Dj1l2NL7ggWWIzqB5_qS2LWbxgrEl9G48XmRIEJH2nyKhvS5iLosifBh_fP4-", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(embed)
  });

  alert("‚úÖ Bestellung gesendet!");
  document.getElementById("zielort").value = "";
  document.querySelectorAll("input[type=number]").forEach(i => i.value = 0);
  updateTotal();
}

renderGerichte();
</script>

</body>
</html>
